#  다른 뷰 컨트롤러에 데이터 보내거나 받는 방법.

대부분의 뷰 컨트롤러는 이전화면과 그 다음화면이 계층적인 관계를 갖는다.
*ex) 앞에 **VC(ViewController)** 가 상위 내용을 갖는다면, 다음 VC는 상위내용중 특정 주제에 대한 하위 내용을 갖는 구조이다.*

## 화면 전환과정에서 값 전달하는 방법
- 이전화면에서 다음화면으로 값을 주고 받을 경우

case 1: 이전VC에서 다음VC로 값을 **직접 전달**한다.
**직접 전달 방법(동기 방식)**
ex)화면이 전달 될 때 값을 주고난 이후의 데이터가 필요 없는 경우
 주로 직접 전달 방식을 사용한다.
// 저장소를 통한 값을 저장, 꺼내오는 방식보다 코드가 *간결하기* 때문
> 이 방식의 경우 
> 전달 받는 VC 또한 전달 받기 위한 지역 변수를 **미리** 생성해 두어야 한다.
> 서로 다른 VC간 **아울렛 변수 끼리는 데이터를 바로 주고 받지 못한다.**
> 따라서 값을 보낼 VC는 반드시 받는 VC에 대한 정보!!!인스턴스를 가지고, 받는측의 VC는 이전 VC에서 값을 몇개 보낼 것인가?에 대해 받을 변수를 미리 선언해야 한다.
> 
case 2: 이전VC와 다음VC가 **공통 저장소**를 갖는다. ex) github
ex) 지속적으로 값을 저장할 필요가 있을 경우.
**로그인 정보** 처리를 할 경우. 화면이 이동한 이후에도, 계속적으로 갖고 있어야 할 정보이다. 매번 화면의 전환 때마다 정보를 프로그래머가 갱신한다면 ㅎㄷㄷ 쉽지 않을 것이다.
ex) 메모 데이터,
> 공유 저장소를 쓰기 전, 이전VC와 다음 VC간 모두 저장소의 위치를 **사전에 공유**해야 한다. 
> 값을 직접 전달x 공유 저장소에 저장하기 때문에 받는VC에서는 이 저장소로 접근 해야 한다.

- 주의사항 
	- 아울렛 변수는 외부에서 값을 직접 대입할 수 없다. 시스템에 의해 값이 주입된다. 또한 아울렛 변수는 *외부 객체에서 직접 참조할 수 없도록 제한* 되어 있다. 
그래서 프로퍼티에 값을 저장하는 것이다.

//viewWillAppear = 뷰 컨트롤러의 뷰가 화면에 표시 될 때마다(다른화면으로 기존화면 가렸다 다시 기존화면 출력될 경우에도) 이 메서드가 호출된다.
//맨 처음  뷰 컨트롤러가 화면에 나타날 때에도 호출이된다. 이 경우 viewDidAppear( ) ->viewWillAppear( )가 차례로 호출된다.

## case 1: VC에 값 직접 전달 (일회용 느낌?)

1. 위에서 말했지만, 보내는 측VC에서는 전달해야 할 값들을 명확하게 선정하고,
받는 측VC에서는 명확하게 선정된 값의 개수만큼 프로퍼티를 미리 정의해 두어야 한다.
이때 prevVC와 nextVC간 값의 개수는 동일해야 한다.
2. VC1에서 VC2로 값을 전달하기
우선 값을 전달하기 위해서는 VC1에서 VC2의 프로퍼티를 참조할 수 있도록 VC2에 대한 인스턴스를 갖고 있어야 한다.
이때 let nextVC = self.storybaord?.instantiateViewController(withIdentifier: <두번째 클래스 스토리보드ID> ) as? <두번째VC 클래스명> 라는 코드를 통해
두번재 VC에 대한 인스턴스를 생성할 수 있다.
> instantiateViewController 메서드는 인자값으로 받은 스토리보드 ID값을 self.storyboard?자신의 스토리 보드에서 찾아서 인스턴스화 한다. 이때 **UIViewController 타입으로 인스턴스가 생성**된다. 하지만!!!
> 내가 생성한 두번째VC는 UIViewController를 상속받는 자식클래스로 구현되어 있기 때문에, 내가 구현한 프로퍼티들을 UIViewController에서는 사용할 수 없다. 오직 UIViewController 멤버속성만 사용할 수 있다. (업 캐스팅된 인스턴스라는 말이다. )
> 따라서 **다운캐스팅** 을 해야 한다.

3. 특정 함수가 실행됬을 때 위 1,2 과정을 거치게 되면 VC2는 지금 VC1의 값을 넘겨 받았다. 하지만 전달 받은 값들을 화면에 출력해야 한다면 어느 시점이 best of best?
=바로 화면이 메모리에 로드되고 난 직후!!!!
viewDidLoad( )메서드를 호출한다. 이 함수를 쓰자!
// iOS는 특정 타이밍에 따라 메서드를 자동으로 호출해준다. 화면이 메모리에 로드되고 난 시점에는 viewDidLoad( )메서드가 호출된다. 따라서 여기에 VC2의 아울렛 변수에 VC1로부터 대입 받은 값을 대입하면 되는 것이다.

다운 캐스팅을 마친 후에는 해당 인스턴스를 가지고 특정 프로퍼티에 값을 대입하면 된다.
	 
// Q> 그렇다면 이전 VC에 값은 어떻게 전달해? .. 

만약 present를 통해 값을 전달할 경우 이전 인스턴스는 self.presentingViewController를 사용하면 되고,
위에서**presenting~ 이나 presented~ 메서드는** 인스턴스에 대해서 UIViewController타입으로 인스턴스를 리턴한다!!!!


내비게이션 컨트롤이라면 self.navigationController>.viewController를 사용하면 된다.
그리고 VC1은 이전 화면으로 돌아가게 된다면 화면이 새로 생기는 것이 아니라!! 화면이 새롭게 그려질 때 호출되는 **viewWillAppear( )메서드**를 사용해야 한다. ( 그 후 VC2는 소멸된다! )
## case 2: 직접 값 주고 받기
저장소까지는 아니지만 앱이 시작되고, 종료되기 전가지는 AppDelegate.swift 단 하나만 존재하고**(싱글톤)**, 여러 뷰에서 쉽게 접근가능하기 때문에 이 방식을 사용한다. 근데 앱이 종료되면 AppDelegate에 저장한 정보는 모두 소멸됨,, 그래도 저장소 개념과 비슷하기에 이것을 중심으로 설명을 해본다.



이전VC에서 값을 전달해야할 개수만큼 AppDelegate에도 프로퍼티로 정의를한다. 그 후에 
let ad = UIApplication.shared.delegate as? AppDelegate
AppDelegate는 프로그램이 실행 될 때 생성되므로 하나의 생성된 인스턴스를 참조 해야 한다. 이것이 바로 싱글톤의 개념. 설마 ~~깃 허브?~~ 
UIApplicatoin.shared를 통해 현재 생성된 인스턴스를 참조해야 한다.
ad 인스턴스를 통해 VC1값을 전달-> ad -> VC2하고 받으면 된다.

하지만 앱 종료하면 데이터 소멸.
 따라서 더 좋은 방법
### UserDefaults 인스턴스를 이용하는 방법!
let ud = UserDefaluts.standard
//UserDefaults는 시스템에서 자동으로 생성하고, 제공되는 단일 객체이다.(설마 너도 싱글톤 느낌인가??)
// UserDefaluts.standard 프로퍼티를 통해 UserDefaluts 인스턴스를 ud 상수에 저장한 후에, set(_:forKey:)메서드를 사용해 값을 저장한다.
ex) ud.set(self.<아울렛변수(textfield이라한다면)>.text, forKey: "myParam")
set은 집합. = 중복허용x
따라서 forKey에의한 데이터 1개가 저장된다. 만약 이를 호출할 경우
ex)
	ud.set(self.email.text, forKey : "myParam") //email은 text field이다.
	let email = ud.string(forKey: "email"); // ud.<저장된 타입>(forKey : )를 통해 호출하는 방식이군+_+
	//저장된 값의 타입에 맞는 메서드를 사용하면 바로 읽어올 수 있다는 것이다!!!!


